//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use core::ffi::*;
use core::ptr::NonNull;
use objc2::__framework_prelude::*;
#[cfg(feature = "objc2-quartz-core")]
#[cfg(not(target_os = "watchos"))]
use objc2_quartz_core::*;

use crate::*;

extern_class!(
    /// Allows to formally participate in UI updates and influence UI update behavior.
    ///
    /// See also [Apple's documentation](https://developer.apple.com/documentation/uikit/uiupdatelink?language=objc)
    #[unsafe(super(NSObject))]
    #[thread_kind = MainThreadOnly]
    #[derive(Debug, PartialEq, Eq, Hash)]
    pub struct UIUpdateLink;
);

unsafe impl NSObjectProtocol for UIUpdateLink {}

extern_methods!(
    unsafe impl UIUpdateLink {
        #[unsafe(method_family(new))]
        #[method_id(new)]
        pub unsafe fn new(mtm: MainThreadMarker) -> Retained<Self>;

        #[unsafe(method_family(init))]
        #[method_id(init)]
        pub unsafe fn init(this: Allocated<Self>) -> Retained<Self>;

        #[cfg(all(
            feature = "UIResponder",
            feature = "UIScene",
            feature = "UIWindowScene"
        ))]
        #[unsafe(method_family(none))]
        #[method_id(updateLinkForWindowScene:)]
        pub unsafe fn updateLinkForWindowScene(
            window_scene: &UIWindowScene,
        ) -> Retained<UIUpdateLink>;

        #[cfg(all(feature = "UIResponder", feature = "UIView"))]
        #[unsafe(method_family(none))]
        #[method_id(updateLinkForView:)]
        pub unsafe fn updateLinkForView(view: &UIView) -> Retained<UIUpdateLink>;

        #[cfg(all(
            feature = "UIUpdateActionPhase",
            feature = "UIUpdateInfo",
            feature = "block2"
        ))]
        #[method(addActionToPhase:handler:)]
        pub unsafe fn addActionToPhase_handler(
            &self,
            phase: &UIUpdateActionPhase,
            handler: &block2::Block<dyn Fn(NonNull<UIUpdateLink>, NonNull<UIUpdateInfo>)>,
        );

        #[cfg(feature = "UIUpdateActionPhase")]
        #[method(addActionToPhase:target:selector:)]
        pub unsafe fn addActionToPhase_target_selector(
            &self,
            phase: &UIUpdateActionPhase,
            target: &AnyObject,
            selector: Sel,
        );

        /// It's required to enable the Update Link for it to have effect and for its actions to be invoked.
        #[method(isEnabled)]
        pub unsafe fn isEnabled(&self) -> bool;

        /// Setter for [`isEnabled`][Self::isEnabled].
        #[method(setEnabled:)]
        pub unsafe fn setEnabled(&self, enabled: bool);

        /// By default, `UIUpdateLink` is a passive UI update observer. Its actions will only be called when UI update is being
        /// produced. When this property is set to `YES`, `UIUpdateLink` will request continuous UI updates by itself.
        #[method(requiresContinuousUpdates)]
        pub unsafe fn requiresContinuousUpdates(&self) -> bool;

        /// Setter for [`requiresContinuousUpdates`][Self::requiresContinuousUpdates].
        #[method(setRequiresContinuousUpdates:)]
        pub unsafe fn setRequiresContinuousUpdates(&self, requires_continuous_updates: bool);

        /// Request dispatch of low-latency eligible events in `LowLatencyEventDispatch` phase. Low latency eligible events are
        /// dispatch in the middle of the UI update, meaning that to handle them application has half the time, compared to
        /// events dispatched normally. Consult `-[UIUpdateInfo completionDeadlineTime]` for exact completion deadline time.
        #[method(wantsLowLatencyEventDispatch)]
        pub unsafe fn wantsLowLatencyEventDispatch(&self) -> bool;

        /// Setter for [`wantsLowLatencyEventDispatch`][Self::wantsLowLatencyEventDispatch].
        #[method(setWantsLowLatencyEventDispatch:)]
        pub unsafe fn setWantsLowLatencyEventDispatch(
            &self,
            wants_low_latency_event_dispatch: bool,
        );

        /// Request immediate frame presentation. When enabled, system will request immediate rendering of the display frame
        /// after last `CATransaction` commit for the current UI update. This allows to reduce input to display latency, as
        /// rendered display frame will be presented one frame duration sooner. However, for this to happen amount of work
        /// submitted to render server should be minimal, otherwise it will not be able to submit frame for presentation in
        /// time. This capability is primarily useful for pencil drawing applications where low input to display latency is
        /// critical for good user experience. Applications that request immediate presentation must be profiled thoroughly to
        /// ensure that amount of application and render server work is adequate. When application requests immediate
        /// presentation, but fails to keep work complexity at minimum, user will experience on screen judder, as frames will
        /// not be presented at their intended time.
        #[method(wantsImmediatePresentation)]
        pub unsafe fn wantsImmediatePresentation(&self) -> bool;

        /// Setter for [`wantsImmediatePresentation`][Self::wantsImmediatePresentation].
        #[method(setWantsImmediatePresentation:)]
        pub unsafe fn setWantsImmediatePresentation(&self, wants_immediate_presentation: bool);

        #[cfg(feature = "objc2-quartz-core")]
        #[cfg(not(target_os = "watchos"))]
        /// Preferred frame rate range. Even when not forcing periodic updates, this will still express intention to the system.
        /// Use `CAFrameRateRangeDefault` (default value) to not request any specific frame rate range.
        #[method(preferredFrameRateRange)]
        pub unsafe fn preferredFrameRateRange(&self) -> CAFrameRateRange;

        #[cfg(feature = "objc2-quartz-core")]
        #[cfg(not(target_os = "watchos"))]
        /// Setter for [`preferredFrameRateRange`][Self::preferredFrameRateRange].
        #[method(setPreferredFrameRateRange:)]
        pub unsafe fn setPreferredFrameRateRange(
            &self,
            preferred_frame_rate_range: CAFrameRateRange,
        );

        #[cfg(feature = "UIUpdateInfo")]
        /// During UI update, returns `UIUpdateInfo` instance describing current UI update state. Returns `nil` outside of UI
        /// update.
        #[unsafe(method_family(none))]
        #[method_id(currentUpdateInfo)]
        pub unsafe fn currentUpdateInfo(&self) -> Option<Retained<UIUpdateInfo>>;
    }
);

extern_methods!(
    /// Convenience
    unsafe impl UIUpdateLink {
        #[cfg(all(feature = "UIUpdateInfo", feature = "block2"))]
        /// Adds action to `UIUpdateActionPhase.beforeCADisplayLinkDispatch` phase.
        #[method(addActionWithHandler:)]
        pub unsafe fn addActionWithHandler(
            &self,
            handler: &block2::Block<dyn Fn(NonNull<UIUpdateLink>, NonNull<UIUpdateInfo>)>,
        );

        /// Adds action to `UIUpdateActionPhase.beforeCADisplayLinkDispatch` phase.
        #[method(addActionWithTarget:selector:)]
        pub unsafe fn addActionWithTarget_selector(&self, target: &AnyObject, selector: Sel);

        #[cfg(all(
            feature = "UIResponder",
            feature = "UIScene",
            feature = "UIUpdateInfo",
            feature = "UIWindowScene",
            feature = "block2"
        ))]
        /// Adds action to `UIUpdateActionPhase.beforeCADisplayLinkDispatch` phase.
        #[unsafe(method_family(none))]
        #[method_id(updateLinkForWindowScene:actionHandler:)]
        pub unsafe fn updateLinkForWindowScene_actionHandler(
            window_scene: &UIWindowScene,
            handler: &block2::Block<dyn Fn(NonNull<UIUpdateLink>, NonNull<UIUpdateInfo>)>,
        ) -> Retained<UIUpdateLink>;

        #[cfg(all(
            feature = "UIResponder",
            feature = "UIScene",
            feature = "UIWindowScene"
        ))]
        /// Adds action to `UIUpdateActionPhase.beforeCADisplayLinkDispatch` phase.
        #[unsafe(method_family(none))]
        #[method_id(updateLinkForWindowScene:actionTarget:selector:)]
        pub unsafe fn updateLinkForWindowScene_actionTarget_selector(
            window_scene: &UIWindowScene,
            target: &AnyObject,
            selector: Sel,
        ) -> Retained<UIUpdateLink>;

        #[cfg(all(
            feature = "UIResponder",
            feature = "UIUpdateInfo",
            feature = "UIView",
            feature = "block2"
        ))]
        /// Adds action to `UIUpdateActionPhase.beforeCADisplayLinkDispatch` phase.
        #[unsafe(method_family(none))]
        #[method_id(updateLinkForView:actionHandler:)]
        pub unsafe fn updateLinkForView_actionHandler(
            view: &UIView,
            handler: &block2::Block<dyn Fn(NonNull<UIUpdateLink>, NonNull<UIUpdateInfo>)>,
        ) -> Retained<UIUpdateLink>;

        #[cfg(all(feature = "UIResponder", feature = "UIView"))]
        /// Adds action to `UIUpdateActionPhase.beforeCADisplayLinkDispatch` phase.
        #[unsafe(method_family(none))]
        #[method_id(updateLinkForView:actionTarget:selector:)]
        pub unsafe fn updateLinkForView_actionTarget_selector(
            view: &UIView,
            target: &AnyObject,
            selector: Sel,
        ) -> Retained<UIUpdateLink>;
    }
);
